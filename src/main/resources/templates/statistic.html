<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BlackJack</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <style type="text/css">

        html {
            background: url('images/table.png') no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }

        .positionOfButt {
            margin: 0;
            position: absolute;
            top: 96%;
            left: 50%;
            margin-right: -50%;
            transform: translate(-50%, -50%)
        }

        .message {
            font-family: "Times New Roman", Times, serif;
            font-size: 30px;
            letter-spacing: 0.2px;
            word-spacing: 0.2px;
            color: #FFFFFF;
            font-weight: normal;
            text-decoration: none solid rgb(68, 68, 68);
            font-style: normal;
            font-variant: small-caps;
            text-transform: none;
            top: 2%;
        }

        p {
            display: block;
            margin-top: 15em;
            margin-bottom: 1em;
            margin-left: 30em;
            margin-right: 0;

        }
    </style>
</head>
<body>
<div align="center" class="positionOfButt">
    <a href="#" class="butt" id="statt">Get statistics</a>
</div>
<div id="text"></div>
<div class="message">
    <p id="stats_text">
    </p>
</div>
<div id="space">
    <br/>
</div>
<div id="stats" align="top" class="positionOfUserCards">
</div>
<script>
    var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = window.location.search.substring(1),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
            }
        }
    };

    $("#statt").on('click', function () {

        var username = getUrlParameter('username');
        $.ajax({
            url: '/stats',
            headers: {
                'Username': username
            },
            method: 'GET',
            dataType: 'json',
            success: function (data) {
                console.log(data.statistics);
                data.statistics.forEach(function (el, i, arr) {
                    console.log(el);

                    el.cards.forEach(function (ell, i, arr) {
                        console.log(ell);
                        $('#stats')
                            .append(
                                '<img id="theImg" width="100" src="http://localhost:8080/images/cards/' + ell.values + '_of_'
                                + ell.suit.toLowerCase() + '.png" />')
                    })
                    $('#stats')
                        .append(
                            el.winState);
                    $('#space')
                });

            }
        });
    });
</script>
</body>
</html>